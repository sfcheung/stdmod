<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Standardized moderation effect given an lm output — std_selected • stdmod</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Standardized moderation effect given an lm output — std_selected"><meta property="og:description" content="Compute the standardized moderation effect as well as the standardized coefficients for other predictors given an lm output"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">stdmod</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/stdmod.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/numerical_example_01.html">Numerical Example - stdmod_selected</a>
    </li>
    <li>
      <a href="../articles/numerical_example_02.html">Compute the Standardized Moderation Effect by stdmod_selected</a>
    </li>
    <li>
      <a href="../articles/numerical_example_lavaan.html">Compute Standardized Moderation Effect in SEM using stdmod_lavaan</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/sfcheung/stdmod/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Standardized moderation effect given an <code>lm</code> output</h1>
    <small class="dont-index">Source: <a href="https://github.com/sfcheung/stdmod/blob/HEAD/R/std_selected.R" class="external-link"><code>R/std_selected.R</code></a>, <a href="https://github.com/sfcheung/stdmod/blob/HEAD/R/std_selected_boot.R" class="external-link"><code>R/std_selected_boot.R</code></a></small>
    <div class="hidden name"><code>std_selected.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Compute the standardized moderation effect as well as the standardized coefficients for other predictors given an <code>lm</code> output</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">std_selected</span><span class="op">(</span><span class="va">lm_out</span>, to_scale <span class="op">=</span> <span class="cn">NULL</span>, to_center <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>

<span class="fu">std_selected_boot</span><span class="op">(</span>
  <span class="va">lm_out</span>,
  <span class="va">...</span>,
  conf <span class="op">=</span> <span class="fl">0.95</span>,
  nboot <span class="op">=</span> <span class="fl">100</span>,
  boot_args <span class="op">=</span> <span class="cn">NULL</span>,
  full_output <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>lm_out</dt>
<dd><p>The output from <code>lm</code>.</p></dd>
<dt>to_scale</dt>
<dd><p>Specify the terms to be rescaled by standard deviation,
using a formula as in <code>lm</code>. For example, if the terms to be scale
is x1 and x3, use <code>~ x1 + x3</code>. No need to specify the interaction term.
Specify only the original variables. If NULL, then no terms
will be rescaled by standard deviation. Variables that are not numeric will
will be ignored. Default is NULL.</p></dd>
<dt>to_center</dt>
<dd><p>Specify the terms to be mean-centered, using a formula
as in <code>lm</code>. For example, if the terms to be scale
is x1 and x3, use <code>~ x1 + x3</code>. No need to specify the interaction term.
Specify only the original variables. If NULL, then no terms
will be centered. Default is NULL.</p></dd>
<dt>...</dt>
<dd><p>Arguments to be passed to <code>std_selected</code>.</p></dd>
<dt>conf</dt>
<dd><p>The level of confidence for the confidence interval. Default is .95.</p></dd>
<dt>nboot</dt>
<dd><p>The number of bootstrap samples. Default is 100.</p></dd>
<dt>boot_args</dt>
<dd><p>A named list of arguments to be passed to <code><a href="https://rdrr.io/pkg/boot/man/boot.html" class="external-link">boot::boot()</a></code>. Default
is <code>NULL</code>.</p></dd>
<dt>full_output</dt>
<dd><p>Whether the full output from <code><a href="https://rdrr.io/pkg/boot/man/boot.html" class="external-link">boot::boot()</a></code> is return. Default is
<code>FALSE</code>.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The updated <code>lm</code> output, with the class <code>std_selected</code> added. It will be
treated as a usual <code>lm</code> object by most functions. It has these additional elements:</p><ul><li><p><code>scaled</code>: The terms scaled.</p></li>
<li><p><code>centered</code>: The terms centered.</p></li>
<li><p><code>scaled_by</code>: The scaling factors. The value is 1 for terms not scaled.</p></li>
<li><p><code>centered</code>: The values used for centering. The value is 0 for terms not centered.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p><code>std_selected()</code> was originally developed to compute the standardized moderation effect and the standardized coefficietns for other predictors given an <code>lm</code> output. It has been revised such that users can be specify which variables in a regression model is mean-centered and rescaled by their
standard deviations. If the model has interaction terms, they will be formed after the transformation, yielding the correct standardized solution for a moderated regression model. Moreover, categorical predictors will be automatically skipped in mean-centering and rescaling.</p>
<p>Standardization is conducted when a variable is mean-centered and then rescaled by its standard deviation. Therefore, if the goal is to get the standardized solution of a moderated regression, users
just instruct the function to standardize all non-categorical variables in the regression model.</p>
<p>This function is a wrapper of <code>std_selected()</code>. It calls <code>std_selected()</code> once
for each bootstrap sample, and then compute the nonparametric bootstrapping
percentile confidence intervals.</p>
<p>This function intentionally does not have an argument for setting the seed for
random number. Users are recommended to set the seed, e.g., using <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code>
before calling it, to ensure reproducibility.</p>
    </div>
    <div id="functions">
    <h2>Functions</h2>
    
<ul><li><p><code>std_selected</code>: The base function to center or scale selected variables</p></li>
<li><p><code>std_selected_boot</code>: A wrapper of <code>std_selected()</code> that forms
nonparametrc bootstrapping confidence intervals.</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="co"># Load a sample data set</span></span>
<span class="r-in"><span class="co"># It has one predictor (iv), one moderator (mod), on covariate (v1),</span></span>
<span class="r-in"><span class="co"># one categorial covariate (cat1) with three groups, and one dv (dv).</span></span>
<span class="r-in"><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">test_x_1_w_1_v_1_cat1_n_500</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         dv       iv       mod        v1 cat1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 4946.751 12.76737  96.85621 11.756899  gp1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 6635.081 14.89097 106.25696 11.371237  gp2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 6060.708 15.24101  97.85852  9.377471  gp2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 7240.781 16.65782 104.80266 10.508913  gp1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 5775.759 11.84448  95.85912 15.093480  gp3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 7725.783 16.31270 100.20561  3.442902  gp2</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Do a moderated regression by lm</span></span>
<span class="r-in"><span class="va">lm_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">dv</span> <span class="op">~</span> <span class="va">iv</span><span class="op">*</span><span class="va">mod</span> <span class="op">+</span> <span class="va">v1</span> <span class="op">+</span> <span class="va">cat1</span>, <span class="va">dat</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_raw</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = dv ~ iv * mod + v1 + cat1, data = dat)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residuals:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Min      1Q  Median      3Q     Max </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -2146.0  -431.9   -25.0   411.2  2309.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std. Error t value Pr(&gt;|t|)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept)  308.767   4075.066   0.076   0.9396  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv            52.760    271.242   0.195   0.8459  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mod            5.127     40.772   0.126   0.9000  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v1           -12.760     10.174  -1.254   0.2104  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp2     -158.673     71.834  -2.209   0.0276 *</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp3      -43.166     75.283  -0.573   0.5666  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv:mod         3.416      2.709   1.261   0.2080  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual standard error: 665 on 493 degrees of freedom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Multiple R-squared:  0.6352,	Adjusted R-squared:  0.6307 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F-statistic:   143 on 6 and 493 DF,  p-value: &lt; 2.2e-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Mean center mod only</span></span>
<span class="r-in"><span class="va">lm_cw</span> <span class="op">&lt;-</span> <span class="fu">std_selected</span><span class="op">(</span><span class="va">lm_raw</span>, to_center <span class="op">=</span> <span class="op">~</span> <span class="va">mod</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_cw</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Selected variable(s) are centered and/or scaled</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable(s) centered: mod</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable(s) scaled:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      centered_by scaled_by</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dv         0.000         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv         0.000         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mod      100.395         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v1         0.000         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1       0.000         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Note:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Centered by 0 = No centering; Scaled by 1: No scaling.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = dv ~ iv * mod + v1 + cat1, data = dat_mod)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residuals:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Min      1Q  Median      3Q     Max </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -2146.0  -431.9   -25.0   411.2  2309.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept)  823.445    249.736   3.297  0.00105 ** </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv           395.693     14.684  26.948  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mod            5.127     40.772   0.126  0.89999    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v1           -12.760     10.174  -1.254  0.21037    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp2     -158.673     71.834  -2.209  0.02764 *  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp3      -43.166     75.283  -0.573  0.56664    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv:mod         3.416      2.709   1.261  0.20799    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual standard error: 665 on 493 degrees of freedom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Multiple R-squared:  0.6352,	Adjusted R-squared:  0.6307 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F-statistic:   143 on 6 and 493 DF,  p-value: &lt; 2.2e-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Mean center mod and iv</span></span>
<span class="r-in"><span class="va">lm_cwx</span> <span class="op">&lt;-</span> <span class="fu">std_selected</span><span class="op">(</span><span class="va">lm_raw</span>, to_center <span class="op">=</span> <span class="op">~</span> <span class="va">mod</span> <span class="op">+</span> <span class="va">iv</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_cwx</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Selected variable(s) are centered and/or scaled</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable(s) centered: mod iv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable(s) scaled:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      centered_by scaled_by</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dv       0.00000         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv      15.01576         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mod    100.39502         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v1       0.00000         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1     0.00000         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Note:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Centered by 0 = No centering; Scaled by 1: No scaling.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = dv ~ iv * mod + v1 + cat1, data = dat_mod)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residuals:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Min      1Q  Median      3Q     Max </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -2146.0  -431.9   -25.0   411.2  2309.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept) 6765.069    115.857  58.392   &lt;2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv           395.693     14.684  26.948   &lt;2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mod           56.418      5.941   9.496   &lt;2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v1           -12.760     10.174  -1.254   0.2104    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp2     -158.673     71.834  -2.209   0.0276 *  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp3      -43.166     75.283  -0.573   0.5666    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv:mod         3.416      2.709   1.261   0.2080    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual standard error: 665 on 493 degrees of freedom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Multiple R-squared:  0.6352,	Adjusted R-squared:  0.6307 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F-statistic:   143 on 6 and 493 DF,  p-value: &lt; 2.2e-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Standardize both mod and iv</span></span>
<span class="r-in"><span class="va">lm_stdwx</span> <span class="op">&lt;-</span> <span class="fu">std_selected</span><span class="op">(</span><span class="va">lm_raw</span>, to_scale <span class="op">=</span> <span class="op">~</span> <span class="va">mod</span> <span class="op">+</span> <span class="va">iv</span>,</span>
<span class="r-in">                               to_center <span class="op">=</span> <span class="op">~</span> <span class="va">mod</span> <span class="op">+</span> <span class="va">iv</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_stdwx</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Selected variable(s) are centered and/or scaled</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable(s) centered: mod iv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable(s) scaled: mod iv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      centered_by scaled_by</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dv       0.00000  1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv      15.01576  2.039154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mod    100.39502  5.040823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v1       0.00000  1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1     0.00000  1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Note:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Centered by 0 = No centering; Scaled by 1: No scaling.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = dv ~ iv * mod + v1 + cat1, data = dat_mod)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residuals:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Min      1Q  Median      3Q     Max </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -2146.0  -431.9   -25.0   411.2  2309.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept)  6765.07     115.86  58.392   &lt;2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv            806.88      29.94  26.948   &lt;2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mod           284.39      29.95   9.496   &lt;2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v1            -12.76      10.17  -1.254   0.2104    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp2      -158.67      71.83  -2.209   0.0276 *  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp3       -43.17      75.28  -0.573   0.5666    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv:mod         35.11      27.85   1.261   0.2080    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual standard error: 665 on 493 degrees of freedom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Multiple R-squared:  0.6352,	Adjusted R-squared:  0.6307 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F-statistic:   143 on 6 and 493 DF,  p-value: &lt; 2.2e-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Standardize all variables except for categorical variables.</span></span>
<span class="r-in"><span class="co"># Interaction terms are formed after standardization.</span></span>
<span class="r-in"><span class="va">lm_std</span> <span class="op">&lt;-</span> <span class="fu">std_selected</span><span class="op">(</span><span class="va">lm_raw</span>, to_scale <span class="op">=</span> <span class="op">~</span> <span class="va">.</span>,</span>
<span class="r-in">                               to_center <span class="op">=</span> <span class="op">~</span> <span class="va">.</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_std</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Selected variable(s) are centered and/or scaled</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable(s) centered: dv iv mod v1 cat1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable(s) scaled: dv iv mod v1 cat1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      centered_by   scaled_by</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dv    6565.02965 1094.244465</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv      15.01576    2.039154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mod    100.39502    5.040823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v1      10.13884    2.938932</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1          NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Note:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Centered by 0 = No centering; Scaled by 1: No scaling.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = dv ~ iv * mod + v1 + cat1, data = dat_mod)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residuals:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Min       1Q   Median       3Q      Max </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -1.96117 -0.39474 -0.02285  0.37579  2.11040 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept)  0.06458    0.04825   1.338   0.1814    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv           0.73738    0.02736  26.948   &lt;2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mod          0.25990    0.02737   9.496   &lt;2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v1          -0.03427    0.02733  -1.254   0.2104    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp2     -0.14501    0.06565  -2.209   0.0276 *  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp3     -0.03945    0.06880  -0.573   0.5666    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv:mod       0.03209    0.02545   1.261   0.2080    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual standard error: 0.6077 on 493 degrees of freedom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Multiple R-squared:  0.6352,	Adjusted R-squared:  0.6307 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F-statistic:   143 on 6 and 493 DF,  p-value: &lt; 2.2e-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">test_x_1_w_1_v_1_cat1_n_500</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         dv       iv       mod        v1 cat1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 4946.751 12.76737  96.85621 11.756899  gp1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 6635.081 14.89097 106.25696 11.371237  gp2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 6060.708 15.24101  97.85852  9.377471  gp2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 7240.781 16.65782 104.80266 10.508913  gp1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 5775.759 11.84448  95.85912 15.093480  gp3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 7725.783 16.31270 100.20561  3.442902  gp2</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Do a moderated regression by lm</span></span>
<span class="r-in"><span class="va">lm_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">dv</span> <span class="op">~</span> <span class="va">iv</span><span class="op">*</span><span class="va">mod</span> <span class="op">+</span> <span class="va">v1</span> <span class="op">+</span> <span class="va">cat1</span>, <span class="va">dat</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_raw</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = dv ~ iv * mod + v1 + cat1, data = dat)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residuals:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Min      1Q  Median      3Q     Max </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -2146.0  -431.9   -25.0   411.2  2309.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std. Error t value Pr(&gt;|t|)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept)  308.767   4075.066   0.076   0.9396  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv            52.760    271.242   0.195   0.8459  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mod            5.127     40.772   0.126   0.9000  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v1           -12.760     10.174  -1.254   0.2104  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp2     -158.673     71.834  -2.209   0.0276 *</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp3      -43.166     75.283  -0.573   0.5666  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv:mod         3.416      2.709   1.261   0.2080  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual standard error: 665 on 493 degrees of freedom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Multiple R-squared:  0.6352,	Adjusted R-squared:  0.6307 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F-statistic:   143 on 6 and 493 DF,  p-value: &lt; 2.2e-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span class="co"># Standardize all variables as in std_selected above, and compute the</span></span>
<span class="r-in"><span class="co"># nonparametric boostrapping percentile confidence intervals.</span></span>
<span class="r-in"><span class="va">lm_std_boot</span> <span class="op">&lt;-</span> <span class="fu">std_selected_boot</span><span class="op">(</span><span class="va">lm_raw</span>, </span>
<span class="r-in">                                    to_scale <span class="op">=</span> <span class="op">~</span> <span class="va">.</span>,</span>
<span class="r-in">                                    to_center <span class="op">=</span> <span class="op">~</span> <span class="va">.</span>,</span>
<span class="r-in">                                    conf <span class="op">=</span> <span class="fl">.95</span>,</span>
<span class="r-in">                                    nboot <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># In read analysis, nboot should be at least 2000.</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_std_boot</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Selected variable(s) are centered and/or scaled</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable(s) centered: dv iv mod v1 cat1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable(s) scaled: dv iv mod v1 cat1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      centered_by   scaled_by</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dv    6565.02965 1094.244465</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv      15.01576    2.039154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mod    100.39502    5.040823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v1      10.13884    2.938932</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1          NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Note:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Centered by 0 = No centering; Scaled by 1: No scaling.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Nonparametric bootstrapping 95% confidence intervals computed.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of bootstrap samples is 500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = dv ~ iv * mod + v1 + cat1, data = dat_mod)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residuals:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Min       1Q   Median       3Q      Max </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -1.96117 -0.39474 -0.02285  0.37579  2.11040 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Estimate  CI Lower  CI Upper Std. Error t value Pr(&gt;|t|)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept)  0.064582 -0.018578  0.148191   0.048250   1.338   0.1814    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv           0.737384  0.689194  0.780390   0.027363  26.948   &lt;2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mod          0.259899  0.203437  0.315304   0.027369   9.496   &lt;2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v1          -0.034271 -0.094810  0.028819   0.027325  -1.254   0.2104    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp2     -0.145006 -0.283950 -0.004528   0.065647  -2.209   0.0276 *  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cat1gp3     -0.039448 -0.180289  0.103887   0.068799  -0.573   0.5666    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iv:mod       0.032087 -0.013220  0.074921   0.025451   1.261   0.2080    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual standard error: 0.6077 on 493 degrees of freedom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Multiple R-squared:  0.6352,	Adjusted R-squared:  0.6307 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F-statistic:   143 on 6 and 493 DF,  p-value: &lt; 2.2e-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span class="co"># }</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Shu Fai Cheung.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

